/*const db = require('../config/db.js');
const sequelize = require('sequelize');
exports.findAll = (req, res) => {
 db.sequelize.query('select productId AS "productId", productName AS "productName", productAliasName AS "productAliasName",categoryId AS "categoryId",tenure AS "tenure",monthlyIntRate As "monthlyIntRate",quarterlyIntRate AS "quarterlyIntRate",yearlyIntRate AS "yearlyIntRate",onMaturityRate AS "onMaturityRate ",remarks AS "remarks" from api_productdetails').then(results => {
 var prod = results[0];
 if(prod.length>0)
 {
    return res.status(200).send({"message": "ok","responseCode":"200","response":prod});
 }
 else{
        res.send({"responseCode":"404","message": "products details not found "});
 }
 }).catch(err => {
    res.status(500).send({
        message: err.message
    });
  });
 };*/
 
const db = require('../config/db.js');
const sequelize = require('sequelize');
var logger = require('../config/logger');
var {
   sucessCode,
   resourceNotFoundcode,
   badRequestcode
} = require('../config/env');

exports.productDetails = (req, res, err) => {
   
   logger.info(`
      ${res.StatusCode} || 
      ${new Date()} || 
      ${req.originalUrl} || 
      ${JSON.stringify(req.body)} || 
      ${req.ip} || 
      ${req.protocol} || 
      ${req.method}
   `);
   
   var query = 'select productId "productId", productName "productName", productAliasName "productAliasName",categoryId "categoryId",\
   tenure "tenure",monthlyIntRate "monthlyIntRate",quarterlyIntRate "quarterlyIntRate",yearlyIntRate "yearlyIntRate",\
   onMaturityRate "onMaturityRate ",remarks "remarks" from api_productdetails';
	
   db.sequelize.query(query).then(results =>{
	  var result = results[0];
	  var yearlyIntRate = Math.round(result[4].yearlyIntRate*100)/100;
	   result[4].yearlyIntRate = yearlyIntRate;
	   results[0] = result;
      return res.status(200).send({
         "responseCode":sucessCode,
         "response":results[0]
      });
   }).catch(err => {
      return res.status(500).send({
         data:null,
         message: err.message
      });
   });
}  
  
 
  
  